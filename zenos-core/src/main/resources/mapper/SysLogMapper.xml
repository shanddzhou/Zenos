<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<mapper namespace="com.zhoushan.blog.persistence.mapper.SysLogMapper">
    <resultMap id="rm" type="com.zhoushan.blog.persistence.beans.SysLog">
        <id property="id" column="id" jdbcType="BIGINT"/>
        <result property="userId" column="user_id" jdbcType="BIGINT"/>
        <result property="type" column="type" jdbcType="VARCHAR"/>
        <result property="logLevel" column="log_level" jdbcType="VARCHAR"/>
        <result property="context" column="context" jdbcType="VARCHAR"/>
        <result property="params" column="params" jdbcType="VARCHAR"/>
        <result property="ip" column="ip" jdbcType="VARCHAR"/>
        <result property="ua" column="ua" jdbcType="VARCHAR"/>
        <result property="os" column="os" jdbcType="VARCHAR"/>
        <result property="brower" column="brower" jdbcType="VARCHAR"/>
        <result property="referer" column="referer" jdbcType="VARCHAR"/>
        <result property="requestUrl" column="request_url" jdbcType="VARCHAR"/>
        <result property="createTime" column="create_time" jdbcType="TIMESTAMP"/>
        <result property="updateTime" column="update_time" jdbcType="TIMESTAMP"/>
    </resultMap>


    <select id="findPageBreakByCondition" resultMap="rm" parameterType="com.zhoushan.blog.business.vo.LogConditionVO">
        SELECT
        t.*
        FROM
        sys_log t
        WHERE
        2=2
        <if test="userId !=null">
            AND t.user_id=#{userId}
        </if>
        <if test="logLevel!=null">
            AND t.log_level=#{logLevel}
        </if>
        <if test="type!=null">
            AND t.type=#{type}
        </if>
        ORDER BY
        t.create_time DESC
    </select>
</mapper>